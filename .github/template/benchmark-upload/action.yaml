name: benchmark-upload
description: "Finish processing single benchmark report"

# Were we can define the inputs that our action will accept
inputs:
  report-path:
    required: true
    description: "Path of the report file to import"
  github-token:
    required: true
    description: "Github token"
  name:
    required: true
    description: "Benchmark name"
  is_main_branch:
    required: true
    description: 'Indicates if this is the main branch, which will disable comments and failures, and enable pushing'

runs:
  using: "composite"
  steps:
    - uses: benchmark-action/github-action-benchmark@v1
      with:
        tool: 'benchmarkdotnet'
        output-file-path: ${{ inputs.report-path }}
        alert-threshold: '200%'
        comment-on-alert: ${{ inputs.is_main_branch == false }}
        comment-always: ${{ inputs.is_main_branch == false }}
        fail-on-alert: ${{ inputs.is_main_branch == false }}
        auto-push: ${{ inputs.is_main_branch == true }}
        github-token: ${{ inputs.github-token }}
        benchmark-data-dir-path: ""
        name: ${{ inputs.name }}
